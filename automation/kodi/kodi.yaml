- id: kodi_movie_on
  alias: 'Playing Movie on Kodi'
  trigger:
  - platform: state
    entity_id: media_player.kodishieldtv
    from: 'idle'
    to: 'playing'
  - platform: state
    entity_id: media_player.kodishieldtv
    from: 'paused'
    to: 'playing'
  condition:
  - condition: state
    entity_id: sun.sun
    state: 'below_horizon'
  - condition: state
    entity_id: group.living_room_lights
    state: 'on'
  - condition: or
    conditions:
    - condition: template
      value_template: '{{ states.media_player.kodishieldtv.attributes.media_content_type == "tvshow" }}'
    - condition: template
      value_template: '{{ states.media_player.kodishieldtv.attributes.media_content_type == "movie" }}'
  action:
    service: scene.turn_on
    entity_id: scene.watch_movie
    
- id: kodi_movie_paused
  alias: 'Playing Movie on Kodi Paused'
  trigger:
  - platform: state
    entity_id: media_player.kodishieldtv
    from: 'playing'
    to: 'paused'
  condition:
  - condition: state
    entity_id: sun.sun
    state: 'below_horizon'
  - condition: state
    entity_id: group.living_room_lights
    state: 'on'
  - condition: or
    conditions:
    - condition: template
      value_template: '{{ states.media_player.kodishieldtv.attributes.media_content_type == "tvshow" }}'
    - condition: template
      value_template: '{{ states.media_player.kodishieldtv.attributes.media_content_type == "movie" }}'
  action:
    service: scene.turn_on
    entity_id: scene.default
      
- id: kodi_movie_off
  alias: 'Playing Movie on Kodi Stopped'
  trigger:
  - platform: state
    entity_id: media_player.kodishieldtv
    from: 'playing'
    to: 'idle'
  condition:
  - condition: state
    entity_id: sun.sun
    state: 'below_horizon'
  - condition: state
    entity_id: group.living_room_lights
    state: 'on'
  action:
    service: scene.turn_on
    entity_id: scene.default